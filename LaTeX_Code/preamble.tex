% -------------------------------
% PAGE GEOMETRY
% -------------------------------
\usepackage[a4paper,tmargin=2.0cm,bmargin=2.0cm,rmargin=2cm,lmargin=2cm]{geometry}

\usepackage{float}
\usepackage{subcaption}

% --- STANDARD PACKAGES ---
\usepackage{amssymb, amsfonts}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{subcaption}

\usepackage{algpseudocode}
\usepackage{csquotes}
\usepackage{xcolor}
\definecolor{thesisblue}{RGB}{20, 68, 106}
\definecolor{thesisgray}{RGB}{80, 80, 80}
\usepackage{lmodern}
\usepackage{array}
\usepackage{booktabs}  % For professional-looking tables
\usepackage{tabularx}

\usepackage{enumitem}  % For customized lists (e.g., itemize, enumerate)
\usepackage{colortbl}
\usepackage{lscape}    % Optional: For landscape tables if the table is extremely wide

\usepackage{pgfplots}  % For plotting functions
\usepgfplotslibrary{groupplots}
\pgfplotsset{compat=1.18} 
\usepackage{float}

\usepackage{etoolbox}
\usepackage{tabularray}

% --- TIKZ PACKAGES & LIBRARIES ---
\usepackage{tikz}
\usetikzlibrary{
	positioning,
	fit,
	arrows.meta,
	shapes.geometric,
	calc,
	matrix,
	patterns,
	shadows,
	backgrounds,
	decorations.pathreplacing,
	shapes.misc
}

% --- CUSTOM TIKZ STYLES (plotneuralnet inspired) ---
\tikzset{
	% For 3D-like convolutional layers
	cuboid/.style={
		shape=trapezium,
		trapezium left angle=70,
		trapezium right angle=-70,
		shape border rotate=90,
		minimum width=2.2cm,
		minimum height=1cm,
		draw, thick,
		align=center,
		font=\small
	},
	% Default cuboid color (Frozen)
	cuboidfill/.style={
		fill=blue!20
	},
	% Style for trainable components (sets cuboid color to orange)
	trainable/.style={
		fill=orange!30
	},
	% Style for generic blocks
	block/.style={
		rectangle, draw, thick,
		minimum width=3cm, minimum height=1.5cm, align=center,
		rounded corners=3pt
	},
	% Standard block for operations
	op/.style={
		circle, draw, thick, fill=gray!10, minimum size=0.8cm
	},
	% Main arrows for data flow
	arrow/.style={
		-Stealth, thick, draw=black!80
	},
	% Orange LoRA arrows
	loraarrow/.style={
		-Stealth, thick, draw=orange!80!black
	},
	% Dashed highlight around LoRA path
	lorabox/.style={
		draw=orange!70!black, dashed, thick,
		inner sep=6pt, rounded corners
	},
	% Title for a diagram section
	blocktitle/.style={
		font=\sffamily\bfseries\small, text=black!90
	}, 
	outnode/.style={
		rectangle, draw, fill=blue!10, rounded corners, minimum height=1cm
	}
}

% -------------------------------
% FONTS & TYPOGRAPHY
% -------------------------------
\renewcommand{\familydefault}{\rmdefault} 
\usepackage{mathpazo}                   
\usepackage{microtype}          
\usepackage{setspace}               
\setstretch{1.2}                          

% -------------------------------
% CHAPTER & SECTION STYLING
% -------------------------------
\usepackage[Lenny]{fncychap}
\usepackage{titlesec}
\titleformat*{\section}{\Large\bfseries\sffamily}       
\titleformat*{\subsection}{\large\bfseries\sffamily}    
\titleformat*{\subsubsection}{\large\bfseries\sffamily} 
\titleformat{\chapter}[display]{\sf\bfseries\LARGE}{\vspace{-10ex}
	\filleft\MakeUppercase{\chaptertitlename}~
	\Huge\thechapter}{4ex}{\titlerule\vspace{2ex}\filright}[\vspace{2ex}\titlerule]

% -------------------------------
% HEADERS & FOOTERS
% -------------------------------
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyfoot[LE,RO]{\tiny Master of Science in Data Science and Artificial Intelligence}
\rhead{}
\lfoot{\footnotesize\tiny\textbf{Gwade Steve}}
\rfoot{\footnotesize\tiny\textbf{MTTL and Application to Malaria Detection}}

% -------------------------------
% INPUT ENCODING & LANGUAGE
% -------------------------------
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{verbatim}
\usepackage{url}
\usepackage{lipsum}
\usepackage{csquotes}

% -------------------------------
% MATH & SYMBOLS
% -------------------------------
\usepackage{calc,amsfonts,amssymb,amsthm,latexsym}
\usepackage{tocloft}
\usepackage[centertags]{amsmath}

% -------------------------------
% LIST OF EQUATIONS
% -------------------------------
\newcommand{\listequationsname}{List of Equations}
\newlistof{myequations}{equ}{\listequationsname}

% Command to add an equation caption to the list
\newcommand{\myequations}[1]{%
	\addcontentsline{equ}{myequations}{\protect\numberline{\theequation}#1}}


% -------------------------------
% GRAPHICS & OTHER PACKAGES
% -------------------------------
\usepackage{fancybox,wrapfig,exscale,colortbl,tcolorbox,frcursive,empheq,multicol,varwidth,lipsum}
\usepackage{pgf,tikz}
\usetikzlibrary{arrows,calc}
\usepackage{eso-pic,bclogo}
\usepackage[all]{xy}

% -------------------------------
% HYPERLINKS
% -------------------------------
\usepackage{hyperref}
\hypersetup{
	colorlinks=true,
	linkcolor=black,
	citecolor=teal,
	urlcolor=magenta,
	filecolor=orange,
	pdfauthor={Gwade Steve},
	pdftitle={Multi-Task Transfer Learning – Malaria Detection}
}

% -------------------------------
% BIBLIOGRAPHY / REFERENCES
% -------------------------------
\usepackage[backend=biber, style=numeric, sorting=none]{biblatex} 
\addbibresource{references.bib}

% -------------------------------
% ABBREVIATIONS & ALGORITHMS
% -------------------------------
\usepackage{acro}
\usepackage{longtable} 
\usepackage{multicol}

% Algorithms
\usepackage[ruled,vlined]{algorithm2e}
\SetKwInput{KwInput}{Input}
\SetKwInput{KwOutput}{Output}

% All abbreviations
\input{accronyms}

\acsetup{
	make-links = true,
	first-style = long-short,
	list/name = {List of Acronyms},
	list/heading = none,
	list/sort = true,
	list/template = description,
	pages/display = first
}

% -------------------------------
% THEOREMS
% -------------------------------
\newtheorem{exo}{{Exercice}}[chapter]
\newtheorem{remark}{{Remarque}}[chapter]
\newtheorem{definition}{Définition}[chapter]
\newtheorem{example}{{Exemple}}[chapter]